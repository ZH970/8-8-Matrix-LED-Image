C51 COMPILER V9.54   MIAN                                                                  02/09/2023 20:33:45 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE MIAN
OBJECT MODULE PLACED IN .\Objects\mian.obj
COMPILER INVOKED BY: E:\Keil C51\C51\BIN\C51.EXE mian.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\mia
                    -n.lst) TABS(2) OBJECT(.\Objects\mian.obj)

line level    source

   1          #include <REGX52.H>
   2          
   3          int i;
   4          sbit SER = 0xB4;
   5          sbit SERCLK = 0xB6;
   6          sbit RCK = 0xB5;
   7          
   8          #define MATRIX_LED_PORT P0
   9          
  10          /**
  11           ** @brief Send data to 74HC595
  12           ** @param When state is 0, it will enable LED 8 * 8 dot matrix to display serial data.If LED is enlightin
             -g, this byte is 0
  13           ** @reval 
  14           **/
  15          void _74HC595_Send(unsigned char byte, unsigned int state) {
  16   1        for (i = 0; i < 8; i++) {
  17   2          SER = byte & (0x80 >> i);
  18   2          if ((~state) & 0x01) {
  19   3      
  20   3            if (i == 0) {
  21   4              P2_7 = SER;
  22   4            }
  23   3            if (i == 1) {
  24   4              P2_6 = SER;
  25   4            }
  26   3            if (i == 2) {
  27   4              P2_5 = SER;
  28   4            }
  29   3            if (i == 3) {
  30   4              P2_4 = SER;
  31   4            }
  32   3            if (i == 4) {
  33   4              P2_3 = SER;
  34   4            }
  35   3            if (i == 5) {
  36   4              P2_2 = SER;
  37   4            }
  38   3            if (i == 6) {
  39   4              P2_1 = SER;
  40   4            }
  41   3            if (i == 7) {
  42   4              P2_0 = SER;
  43   4            }
  44   3          }
  45   2          SERCLK = 1;
  46   2          SERCLK = 0;
  47   2        }
  48   1        RCK = 1;
  49   1        RCK = 0;
  50   1      }
  51          
  52          /**
  53           ** @brief Matrix LED show the data that is specified its column
C51 COMPILER V9.54   MIAN                                                                  02/09/2023 20:33:45 PAGE 2   

  54           ** @param Column:{0,7}
  55           ** @reval
  56           **/
  57          void MatrixLED(unsigned int column, Data) {
  58   1        _74HC595_Send(Data, 1);    //No reference value when multiple columns are displayed
  59   1        MATRIX_LED_PORT = ~(0x80 >> column);    //1000 0000
  60   1      }
  61          
  62          void main() {
  63   1        //There must be these codes to initialization
  64   1        SER = 0;
  65   1        RCK = 0;
  66   1        while (1) {
  67   2          MatrixLED(0, 0x40);    //0100 0000
  68   2          MatrixLED(1, 0xD8);    //1101 1000
  69   2          MatrixLED(2, 0xFD);    //1111 1101
  70   2          MatrixLED(3, 0x0E);    //0000 1110
  71   2          MatrixLED(4, 0x1D);    //0001 1101
  72   2          MatrixLED(5, 0x1E);    //0001 1110
  73   2          MatrixLED(6, 0x1C);    //0001 1100
  74   2          MatrixLED(7, 0x38);    //0011 1000
  75   2        };
  76   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    281    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
